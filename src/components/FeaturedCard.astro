---
import { Picture } from 'astro:assets';
import { getImageFromPath } from '../utils/imageLoader';
import type { ImageMetadata } from 'astro';

// Featured Menu Card - For special items with images
interface Props {
	name: string;
	price: string;
	description: string;
	image: string | ImageMetadata;
	emoji?: string;
	color?: string;
}

const { name, price, description, image, emoji = '', color = 'text-red-600' } = Astro.props;

// Convertir string a ImageMetadata si es necesario
const imageData = typeof image === 'string' ? getImageFromPath(image) : image;
---

<article class="border border-white/15 bg-black/40 rounded-xl overflow-hidden hover:border-red-600/50 transition-all duration-300">
	<div class="relative aspect-square">
		{imageData ? (
			<Picture
				src={imageData}
				alt={name}
				widths={[400, 600, 800]}
				sizes="(max-width: 768px) 100vw, 50vw"
				formats={['avif', 'webp']}
				quality={85}
				class="absolute inset-0 w-full h-full object-cover"
				loading="eager"
			/>
		) : (
			<div class="absolute inset-0 flex items-center justify-center bg-gray-800 text-white/60">
				Imagen no disponible
			</div>
		)}
	</div>
	
	<div class="p-4 md:p-5">
		<div class="flex items-center justify-between gap-4 mb-3">
			<h3 class={`text-xl md:text-2xl font-bold ${color} tracking-wide leading-tight`}>
				{name} {emoji}
			</h3>
			<span class="text-lg md:text-xl text-white font-semibold whitespace-nowrap">
				{price}
			</span>
		</div>
		
		<p class="text-sm md:text-base text-white/80 leading-relaxed">
			{description}
		</p>
	</div>
</article>
